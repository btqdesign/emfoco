!function(e){e(document).ready(function(){var t={input:"",mediaFrame:function(){return this.frame||(this.frame=wp.media({id:"loftocean-tax-image-uploader",editing:!0,library:{type:"image"},multiple:!1}).on("select",function(){var i=t.frame.state().get("selection").first().toJSON(),a=i.sizes&&i.sizes.thumbnail?i.sizes.thumbnail.url:i.url;t.input.val(i.id).trigger("change").siblings(".loftocean-upload-image").html(e("<img>",{src:a,style:"max-width: 50%;"})).siblings(".loftocean-remove-image").css("display","block"),t.input=""}).on("open",function(){var e=t.frame.state().get("selection"),i=t.input.val();if(e.reset(),i&&""!==i){var a=wp.media.attachment(i);a.fetch(),e.add(a?[a]:[])}})),this.frame},open:function(e){this.input=e,this.mediaFrame().open()}};e("body").on("click",".loftocean-upload-image",function(i){i.preventDefault(),t.open(e(this).siblings("input[type=hidden]").first())}).on("click",".loftocean-remove-image",function(t){t.preventDefault();var i=e(this).siblings(".loftocean-upload-image").first();e(this).siblings("input[type=hidden]").first().val("").trigger("change"),e(this).css("display","none"),i.text(i.attr("data-upload"))}),e("input[value=add-tag]").length&&e(".term-img-wrap").length&&e(document).ajaxComplete(function(t,i,a){if(i&&4===i.readyState&&200===i.status&&i.responseXML){var n=wpAjax.parseAjaxResponse(i.responseXML,"ajax-response");if(!n||n.errors||!e(".term-img-wrap").length||!e(".term-img-wrap").find(".loftocean-remove-image").length)return;e(".term-img-wrap").find(".loftocean-remove-image").trigger("click")}})})}(jQuery);