!function(e){e(document).ready(function(){e("body").on("change","input[name=loftocean-featured-post-inline-edit]",function(t){var a=!(!loftocean_meta||!loftocean_meta.featured_post)&&loftocean_meta.featured_post;if(e(this).attr("data-id")&&a){var i=a.url,o={action:a.action,post_id:e(this).attr("data-id"),loftocean_featured_post:e(this).attr("checked")?"on":"off",nonce:a.nonce};e.post(i,o)}}).on("change","select.loftocean-author-widget-choose-by",function(t){var a=e(this).val(),i=e(this).parent().siblings(".author-list-choices");switch(i.css("display","none"),a){case"name":i.filter(".author-list-by-name").css("display","");break;case"role":i.filter(".author-list-by-role").css("display","")}}).on("click",".loftocean-post-counter-wrap a",function(t){t.preventDefault();var a=e(this),i=a.siblings("input").first(),o=a.add(a.siblings("a")).not(".edit");a.hasClass("edit")?(a.css("display","none").siblings("a").css("display",""),i.removeAttr("readonly").attr("previous-value",i.val())):(o.css("display","none"),a.siblings("a.edit").css("display",""),a.hasClass("cancel")&&i.val(i.attr("previous-value")),i.attr("readonly","readonly"))}).on("change","#post_author_override",function(t){var a=e(this).val();e("#loftocean-single-post-co-authors").children().css("display","").filter("[value="+a+"]").css("display","none").removeAttr("selected")});var t=!1;if(e("#loftocean-tmpl-format-meta-box").length&&e("#formatdiv").length){var a=e("#formatdiv"),i=e("#loftocean-tmpl-format-meta-box"),o=!1;function n(e){t.children("div.format").css("display","none"),e&&-1!==["gallery","audio","video"].indexOf(e)?t.children("div.format."+e).add(o).css("display",""):o.css("display","none")}a.find(".inside").append(i.html()),t=a.find("#loftocean-format-media"),o=t.children("h4"),n(i.attr("data-format")||""),e("body").on("change","input[name=post_format]",function(t){n(e(this).val())}).on("click","#loftocean-format-media .format-media",function(t){t.preventDefault(),e(this).hasClass("gallery")?l.gallery.open():e(this).hasClass("video")?l.video.open():e(this).hasClass("audio")&&l.audio.open()}).on("change","#loftocean-format-media textarea",function(t){e(this).siblings("input[type=hidden]").length&&e(this).siblings("input[type=hidden]").val("")})}wp.loftocean={},wp.loftocean_media_tools=function(){return wp.loftocean.gallery=new wp.media({frame:"post",state:"gallery-edit",title:wp.media.view.l10n.editGalleryTitle,"media-sidebar":!1,editing:!1}),wp.loftocean.audio=new wp.media({library:{type:"audio"},title:wp.media.view.l10n.addMedia,multiple:!1}),wp.loftocean.video=new wp.media({library:{type:"video"},title:wp.media.view.l10n.addMedia,multiple:!1}),wp.loftocean.gallery.on("update",function(e){var a=wp.loftocean.gallery.state();(e=e||a.get("selection"))&&(t.find(".gallery-id").val(wp.loftocean.gallery.states.get("gallery-edit").get("library").pluck("id").join(",")),t.find(".gallery-code").val(wp.media.gallery.shortcode(e).string()))}).on("open",function(){var e=wp.loftocean.gallery.states.get("gallery-edit").get("library"),a=t.find(".gallery-id").val();a&&(a=a.split(",")).forEach(function(t){var a=wp.media.attachment(t);a.fetch(),e.add(a?[a]:[])})}),wp.loftocean.video.on("select",function(e){var a,i,o=wp.loftocean.video.state();a={width:(i=(e=e||o.get("selection").first()).toJSON()).width,height:i.height,src:i.url},t.find(".video-id").val(i.id),t.find(".video-code").val(wp.media.video.shortcode(a).string())}).on("open",function(){var e=wp.loftocean.video.state().get("selection"),a=t.find(".video-id").val();if(a){var i=wp.media.attachment(a);i.fetch(),e.add(i?[i]:[])}}),wp.loftocean.audio.on("select",function(e){var a,i=wp.loftocean.audio.state(),o={};a=(e=e||i.get("selection").first()).toJSON(),o.src=a.url,t.find(".audio-id").val(a.id),t.find(".audio-code").val(wp.media.audio.shortcode(o).string())}).on("open",function(){var e=wp.loftocean.audio.state().get("selection"),a=t.find(".audio-id").val();if(a){var i=wp.media.attachment(a);i.fetch(),e.add(i?[i]:[])}}),wp.loftocean};var l=new wp.loftocean_media_tools;e(".page-video-meta-box").length&&(t=e(".page-video-meta-box"),e("body").on("click",".loftocean-page-upload-video",function(e){e.preventDefault(),l.video.open()}).on("change",".page-video-meta-box textarea",function(t){e(this).siblings("input[type=hidden]").length&&e(this).siblings("input[type=hidden]").val("")}))})}(jQuery);