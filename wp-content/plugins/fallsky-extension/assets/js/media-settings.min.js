!function(e){var t=wp.media;t.view.Settings.Gallery=t.view.Settings.Gallery.extend({render:function(){var i=this.$el;return t.view.Settings.prototype.render.apply(this,arguments),i.append(t.template("loftocean-gallery-settings")),t.gallery.defaults.type="default",t.gallery.defaults.slider_ratio="ratio-3-2",t.gallery.defaults.justified_row_height=120,t.gallery.defaults.justified_last_row_style="nojustify",t.gallery.defaults.justified_margin=1,this.update("type"),this.update("slider_ratio"),this.update("justified_row_height"),this.update("justified_last_row_style"),this.update("justified_margin"),i.find("select[name=type]").on("change",function(){var t=e(this).val(),a=i.find("select[name=columns]").closest("label.setting"),s=i.find("select.link-to").closest("label.setting"),n=i.find("select[name=size]").closest("label.setting"),l=i.find(".gallery-type-slider"),d=i.find(".gallery-type-justified");l.add(d).hide(),"default"===t?(a.show(),s.show(),n.show()):(a.hide(),s.hide(),n.hide(),"slider"==t?l.show():d.show())}).change(),this},update:function(e){t.view.Settings.prototype.update.apply(this,arguments);var i=this.model.get(e)||t.gallery.defaults[e],a=this.$('[data-setting="'+e+'"]');a.length&&a.is('input[type="number"]')&&!a.is(":focus")&&a.val(i)}}),t.view.Settings.AttachmentDisplay=t.view.Settings.AttachmentDisplay.extend({render:function(){var e=this.options.attachment,i=this.$el;return t.view.settings.defaultProps.image_container="original",e&&_.extend(this.options,{sizes:e.get("sizes"),type:e.get("type"),image_container:e.get("image_container")}),t.view.Settings.prototype.render.call(this),i.find(".setting.align").before(t.template("loftocean-display-settings")),this.update.apply(this,["image_container"]),this.updateLinkTo(),this}}),wp.media.editor.send.attachment=function(e,t){var i,a,s=t.caption;return wp.media.view.settings.captions||delete t.caption,e=wp.media.string.props(e,t),i={id:t.id,post_content:t.description,post_excerpt:s},e.linkUrl&&(i.url=e.linkUrl),"image"===t.type?(a=wp.media.string.image(e),_.each({align:"align",size:"image-size",alt:"image_alt",image_container:"image_container"},function(t,a){e[a]&&(i[t]=e[a])})):"video"===t.type?a=wp.media.string.video(e,t):"audio"===t.type?a=wp.media.string.audio(e,t):(a=wp.media.string.link(e),i.post_title=e.title),wp.media.post("send-attachment-to-editor",{nonce:wp.media.view.settings.nonce.sendToEditor,attachment:i,html:a,post_id:wp.media.view.settings.post.id})}}(jQuery);