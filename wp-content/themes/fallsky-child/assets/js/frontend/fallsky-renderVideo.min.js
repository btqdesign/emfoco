!function(e,t,i){"use strict";var n,o;function a(){this.handlers={nativeVideo:new n,youtube:new o}}function d(){}e.wp=e.wp||{},"addEventListener"in e&&(a.prototype={initialize:function(){if(this.supportsVideo())for(var i in this.handlers){var n=this.handlers[i];if("test"in n&&n.test(t)){this.activeHandler=n.initialize.call(n,t),o=document,a="fallsky_home_custom_content_bg_video_loaded",d=void 0,"function"==typeof e.Event?d=new Event(a):(d=document.createEvent("Event")).initEvent(a,!0,!0),o.dispatchEvent(d);break}}var o,a,d},supportsVideo:function(){return!(!t&&e.innerWidth<t.minWidth||e.innerHeight<t.minHeight)},BaseVideoHandler:d},d.prototype={initialize:function(e){this.settings=e,this.$container=i(".featured-section.style-custom .section-bg").length?i(".featured-section.style-custom .section-bg"):i("<div>",{class:"section-bg"}).prependTo(i(".featured-section.style-custom > .custom-content")),this.container=this.$container.get(0),this.ready()},ready:function(){},setVideo:function(e){this.$container.css({overflow:"hidden","pointer-events":"none"}).find(".fallsky-featured-area-custom-content-video").remove().end().append(i(e).css({position:"absolute"}))},test:function(){return!1},getDimensions:function(){var e=this.$container.width()||16,t=this.$container.height()||9,i=t/e,n=this.container.ratio||9/16;return n>i?{width:e,height:e*n}:{height:t,width:t/n}},resizeVideo:function(){var e=this.video,t=this.getDimensions();e.width=t.width,e.height=t.height,e.style.maxWidth="none"}},d.extend=function(e){var t;function i(){return d.apply(this,arguments)}for(t in i.prototype=Object.create(d.prototype),i.prototype.constructor=i,e)i.prototype[t]=e[t];return i},n=d.extend({test:function(e){return document.createElement("video").canPlayType(e.mimeType)},ready:function(){var t=this,n=document.createElement("video");n.id="fallsky-featured-area-custom-content-video",n.autoplay="autoplay",n.loop="loop",n.muted="muted",this.video=n,t.setVideo(n),i(n).on("loadedmetadata",function(){t.container.ratio=(this.videoHeight||9)/(this.videoWidth||16),t.resizeVideo.call(t)}),i(e).on("resize",function(){t.container.ratio&&t.resizeVideo.call(t)}),n.src=this.settings.videoUrl}}),o=d.extend({test:function(e){return"video/x-youtube"===e.mimeType},ready:function(){var t=this;if("YT"in e)YT.ready(t.loadVideo.bind(t));else{var i=document.createElement("script");i.src="https://www.youtube.com/iframe_api",i.onload=function(){YT.ready(t.loadVideo.bind(t))},document.getElementsByTagName("head")[0].appendChild(i)}},loadVideo:function(){var t=this,n=document.createElement("div"),o=this.settings.videoUrl.match(/^.*(?:(?:youtu\.be\/|v\/|vi\/|u\/\w\/|embed\/)|(?:(?:watch)?\?v(?:i)?=|\&v(?:i)?=))([^#\&\?]*).*/)[1];i.getJSON("https://noembed.com/embed",{format:"json",url:"https://www.youtube.com/watch?v="+o},function(a){var d;t.container.ratio=(a.height||9)/(a.width||16),d=t.getDimensions.call(t),n.id="fallsky-featured-area-custom-content-video",t.setVideo(n),t.player=new YT.Player(n,{videoId:o,width:d.width,height:d.height,events:{onReady:function(e){e.target.mute(),t.video=t.$container.find("#fallsky-featured-area-custom-content-video").get(0)},onStateChange:function(e){YT.PlayerState.ENDED===e.data&&e.target.playVideo()}},playerVars:{autoplay:1,controls:0,disablekb:1,fs:0,iv_load_policy:3,loop:1,modestbranding:1,playsinline:1,rel:0,showinfo:0}}),i(e).on("resize",function(){t.container.ratio&&t.video&&t.resizeVideo.call(t)})})}}),e.wp.featuredAreaCustomContentVideo=new a,document.addEventListener("DOMContentLoaded",e.wp.featuredAreaCustomContentVideo.initialize.bind(e.wp.featuredAreaCustomContentVideo),!1),"customize"in e.wp&&(e.wp.customize.selectiveRefresh.bind("render-partials-response",function(e){"fallsky_featured_custom_content_bg_video_settings"in e&&(t=e.fallsky_featured_custom_content_bg_video_settings)}),e.wp.customize.selectiveRefresh.bind("partial-content-rendered",function(t){"fallsky_home_custom_content_bg_video"===t.partial.id&&e.wp.featuredAreaCustomContentVideo.initialize()})))}(window,window.fallsky_featured_custom_content_bg_video_settings||!1,jQuery);